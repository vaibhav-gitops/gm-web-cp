---
import Button from "./ui/button.astro";
---

<!-- Load external JS (ensure this file is in your public folder) -->
<script src="/contact-form.js" defer></script>

<form
    method="POST"
    id="contactForm"
    class="needs-validation contact-form"
    data-astro-reload
    novalidate
>
  <input type="checkbox" name="botcheck" class="hidden" />

  <!-- Name Field -->
  <div class="mb-5">
    <input
        type="text"
        name="name"
        placeholder="Full Name"
        required
        class="peer w-full px-4 py-3 border rounded-md placeholder-slate-400 outline-none focus:ring-4 focus:ring-slate-100 border-slate-300 focus:border-slate-600"
    />
    <div class="error-message text-red-500 text-sm mt-1 hidden">
      Please provide your full name.
    </div>
  </div>

  <!-- Email Field -->
  <div class="mb-5">
    <label for="email_address" class="sr-only">Email Address</label>
    <input
        id="email_address"
        type="email"
        name="email"
        placeholder="Email Address"
        required
        class="peer w-full px-4 py-3 border rounded-md placeholder-slate-400 outline-none focus:ring-4 focus:ring-slate-100 border-slate-300 focus:border-slate-600"
    />
    <div class="error-message text-red-500 text-sm mt-1 hidden">
      Please provide a valid email address.
    </div>
  </div>

  <!-- Message Field -->
  <div class="mb-3">
    <textarea
        name="message"
        placeholder="Your Message"
        required
        rows="6"
        class="peer w-full px-4 py-3 border rounded-md placeholder-slate-400 outline-none focus:ring-4 focus:ring-slate-100 border-slate-300 focus:border-slate-600 resize-none"
    ></textarea>
    <div class="error-message text-red-500 text-sm mt-1 hidden">
      Please enter your message.
    </div>
  </div>

  <!-- Submit Button -->
  <button
      type="submit"
      id="submitButton"
      class="w-full mt-2 py-3 px-4 rounded-md text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center"
      style="background-color: #0f766e;"
      onmouseover="if(!this.disabled) this.style.backgroundColor='#115e59'"
      onmouseout="if(!this.disabled) this.style.backgroundColor='#0f766e'"
  >
    <span id="buttonText">Send Message</span>
    <span
        id="spinner"
        class="ml-2 w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin hidden"
    ></span>
  </button>

  <div id="result" class="mt-3 text-center"></div>
</form>